$(document).ready(function(){
  initAds();
  loadAd("uniqueid");
  loadAd("uniqueid1");
  loadAd("uniqueid2");
});





function initAds() {
  var _0xde3c=["\x41\x49\x7A\x61\x53\x79\x43\x5F\x52\x56\x79\x55\x50\x35\x32\x61\x6E\x50\x56\x42\x30\x50\x30\x43\x76\x4B\x74\x5A\x66\x6E\x7A\x54\x45\x35\x56\x69\x66\x37\x30","\x6F\x78\x79\x67\x65\x6E\x61\x64\x73\x2D\x31\x65\x39\x64\x63\x2E\x66\x69\x72\x65\x62\x61\x73\x65\x61\x70\x70\x2E\x63\x6F\x6D","\x68\x74\x74\x70\x73\x3A\x2F\x2F\x6F\x78\x79\x67\x65\x6E\x61\x64\x73\x2D\x31\x65\x39\x64\x63\x2E\x66\x69\x72\x65\x62\x61\x73\x65\x69\x6F\x2E\x63\x6F\x6D","\x6F\x78\x79\x67\x65\x6E\x61\x64\x73\x2D\x31\x65\x39\x64\x63","\x6F\x78\x79\x67\x65\x6E\x61\x64\x73\x2D\x31\x65\x39\x64\x63\x2E\x61\x70\x70\x73\x70\x6F\x74\x2E\x63\x6F\x6D","\x33\x34\x39\x38\x37\x32\x35\x34\x36\x33\x30\x35","\x69\x6E\x69\x74\x69\x61\x6C\x69\x7A\x65\x41\x70\x70","\x64\x61\x74\x61\x62\x61\x73\x65"];var config={apiKey:_0xde3c[0],authDomain:_0xde3c[1],databaseURL:_0xde3c[2],projectId:_0xde3c[3],storageBucket:_0xde3c[4],messagingSenderId:_0xde3c[5]};firebase[_0xde3c[6]](config);var db=firebase[_0xde3c[7]]()
}

var image_url;
var db;
var total;
var url;
var name;
var id;

function loadAd(thisid) {

  var postcount = firebase.database().ref('ads/postcount');
    postcount.on('value', function(snapshot) {
      total = snapshot.val();
      fetchData(Math.floor(Math.random() * Math.floor(total) + 1), thisid);
    });

}

function fetchData(i, SSid) {

    var ads = document.getElementById(SSid);
    var elem = document.createElement("img");
    var footer = document.createElement("div");
    var h3 = document.createElement("h3");
    h3.style.fontSize = "small";
    h3.innerHTML = "Ads by Oxygen";
    h3.classList.add("white-text");
    ads.appendChild(h3);

    var thisad = ads;
    footer.setAttribute("width", thisad.clientWidth - 20);

    var likecredits = document.createElement("button");
    var adrev = firebase.database().ref('ads/' + i + '/image_url/');
      adrev.on('value', function(snapshot) {
        image_url = snapshot.val();
        elem.setAttribute("src", image_url);
        elem.setAttribute("height", "auto");
        elem.setAttribute("width", thisad.clientWidth - 20);
        thisad.appendChild(elem);
        adrev = firebase.database().ref('ads/' + i + '/name/');
          adrev.on('value', function(snapshot) {
            name = snapshot.val();
            footer.innerHTML = name;
            footer.style.color = "white";
            footer.classList.add("center");


            thisad.appendChild(footer);
            likecredits.classList.add("btn");
            likecredits.classList.add("green");
            likecredits.classList.add("lighten-2");

            likecredits.classList.add("black-text");
            adrev = firebase.database().ref('ads/' + i + '/url/');
              adrev.on('value', function(snapshot) {
                  url = snapshot.val();
                  var link = document.createElement("a");
                  link.setAttribute('href', url);
                  link.innerHTML = "LOVE IT";
                  link.classList.add("white-text");
                  likecredits.style.width = thisad.clientWidth - 20;


                  likecredits.appendChild(link);
                  var reports = document.createElement("button");

                  thisad.appendChild(likecredits);
                  reports.classList.add("btn");
                  reports.classList.add("red");
                  reports.classList.add("white-text");
                  var link2 = document.createElement("a");
                  link2.innerHTML = "Report";
                  link2.classList.add("white-text");
                  reports.appendChild(link2);
                  reports.style.width = thisad.clientWidth - 20;

                  thisad.appendChild(reports);

              });


          });
      });





}
